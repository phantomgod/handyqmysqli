<?php 	ob_start();	session_start();	// mysql hostname	$hostname = 'localhost';	// mysql username	$username = 'avazquez_biouser';	// mysql password	$password = 'mip@@@#5940';	// Get Extension of the File.	@$extension= end(explode(".", basename($_FILES['file']['name'])));	// isset Determines if a variable is set and is not NULL. Set Size Limit less then 10 MB=10485760 bytes. Extension must be CSV.	if (isset($_FILES['file']) && $_FILES['file']['size'] < 10485760 && $extension== 'csv')	{    	// We will get csv file and save it in a $file    $file = $_FILES['file']['tmp_name']; 	//$handle is a valid file pointer to a file successfully opened by fopen(), popen(), or fsockopen(). fopen() used to open file.    $handle = fopen($file, "r"); 		// We will use try{} Catch() statements here.     	try { 		// Database Connection using PDO		$dbh = new PDO("mysql:host=$hostname;dbname=biovazqu_avazque; charset=utf8;", $username, $password);		// Truncate Table before insertion		$STMR = $dbh->prepare("TRUNCATE TABLE proveedores");		$STMR->execute();        // Prepare the statement for the insertion in the table        $STM = $dbh->prepare('INSERT INTO proveedores (id, proveedor, estado, cif, fecha, suministro, criteriosdeevaluacion, datos, activo) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)');			//Check handel is True or False			if ($handle !== FALSE) 			{				// fgets() Gets a line from file pointer and read the first line from $handle and ignore it.           		fgets($handle);        		// While loop used here and  fgetcsv() parses the line it reads for fields in CSV format and returns an array containing the fields read.         		while (($data = fgetcsv($handle, 1000, ',')) !== FALSE)				{				// For Executing prepared statement we will use below function            	$STM->execute($data);        		}       				//The file pointed to by handle will be closed.        		fclose($handle);								// Closing MySQL database connection    			$dbh = null; 				// If data inserted successfully we will redirect this page to index.php and show success message there with code 77083368				header( "location:index.php?ServerStatsAdded=77083368"); 							}    	}		//  		catch(PDOException $e)		{        die($e->getMessage());    	}	}	else 	{	echo 'Error mesage id File type is not CSV or File Size is greater then 10MB.';    header( "location:index.php?ServerStatsAdded=37767");	}?>		<?php	ob_end_flush()	?>	